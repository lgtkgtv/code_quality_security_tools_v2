#!/bin/bash
# Individual Tool Configurations
# Each tool has its own directory structure and settings

# Tool metadata
declare -A TOOL_DESCRIPTIONS=(
    ["bandit"]="Security vulnerability scanner"
    ["flake8"]="PEP8 style checker"
    ["black"]="Code formatter"
    ["mypy"]="Static type checker"
    ["isort"]="Import sorter"
    ["pytest"]="Unit test runner"
)

declare -A TOOL_CATEGORIES=(
    ["bandit"]="Security"
    ["flake8"]="Style"
    ["black"]="Formatting"
    ["mypy"]="Types"
    ["isort"]="Imports"
    ["pytest"]="Testing"
)

# Tool working directories
declare -A TOOL_DIRS=(
    ["bandit"]="tools/bandit"
    ["flake8"]="tools/flake8"
    ["black"]="tools/black"
    ["mypy"]="tools/mypy"
    ["isort"]="tools/isort"
    ["pytest"]="tools/pytest"
)

# Tool commands with proper config file references
declare -A TOOL_COMMANDS=(
    ["bandit"]="bandit --configfile tools/bandit/config/bandit.yaml -r tools/bandit/working_files -f json"
    ["flake8"]="flake8 --config tools/flake8/config/.flake8 tools/flake8/working_files"
    ["black"]="black --config tools/black/config/pyproject.toml --check --diff tools/black/working_files"
    ["mypy"]="mypy --config-file tools/mypy/config/mypy.ini tools/mypy/working_files"
    ["isort"]="isort --settings-path tools/isort/config/.isort.cfg --check-only --diff tools/isort/working_files"
    ["pytest"]="pytest -c tools/pytest/config/pytest.ini tools/pytest/working_files"
)

# Expected issue counts for each tool
declare -A TOOL_EXPECTED_ISSUES=(
    ["bandit"]="5"
    ["flake8"]="10"
    ["black"]="0"
    ["mypy"]="8"
    ["isort"]="0"
    ["pytest"]="0"
)

# Autofix commands (run on copies in working_files)
declare -A TOOL_AUTOFIX_COMMANDS=(
    ["bandit"]=""  # No autofix for security issues
    ["flake8"]=""  # No autofix capability
    ["black"]="black --config tools/black/config/pyproject.toml tools/black/working_files"
    ["mypy"]=""    # No autofix capability
    ["isort"]="isort --settings-path tools/isort/config/.isort.cfg tools/isort/working_files"
    ["pytest"]=""  # Tests need manual fixing
)

# File patterns for copying examples to working directories
declare -A TOOL_FILE_PATTERNS=(
    ["bandit"]="*.py"
    ["flake8"]="*.py"
    ["black"]="*.py"
    ["mypy"]="*.py"
    ["isort"]="*.py"
    ["pytest"]="*.py"
)

# Output directories for each tool
declare -A TOOL_OUTPUT_DIRS=(
    ["bandit"]="analysis_output/bandit"
    ["flake8"]="analysis_output/flake8"
    ["black"]="analysis_output/black"
    ["mypy"]="analysis_output/mypy"
    ["isort"]="analysis_output/isort"
    ["pytest"]="analysis_output/pytest"
)